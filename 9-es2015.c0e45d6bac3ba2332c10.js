(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"4R7V":function(t,e,n){"use strict";n.r(e);var i=n("fXoL"),a=n("ofXK"),c=n("3Pt+"),o=n("MSSf"),s=n("IRfi"),r=n("TY1r"),l=n("A2Vd"),d=n("sCmA"),h=n("G/Ji"),m=n("XNiG"),p=n("R0Ic"),f=n("6KbF"),u=n("IzEk"),b=n("1G5W"),g=n("OCB9"),_=n("j14s"),k=n("Xlwt"),w=n("tkJt"),v=n("sjd8");const y=[1,"mat-simple-snackbar"];function O(t,e){if(1&t){const t=i.oc();i.nc(0,"div",1),i.nc(1,"button",2),i.vc("click",(function(e){return i.Lc(t),i.zc().action()})),i.Uc(2),i.lc(),i.lc()}if(2&t){const t=i.zc();i.Rb(2),i.Vc(t.data.action)}}const x=[1,"mat-snack-bar-container"];function S(t,e){}class R{constructor(t,e){this._overlayRef=e,this._afterDismissed=new m.a,this._afterOpened=new m.a,this._onAction=new m.a,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe(()=>this.dismiss()),t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),t)}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed.asObservable()}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction.asObservable()}}const C=new i.A("MatSnackBarData");class B{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let j=(()=>{class t{constructor(t,e){this.snackBarRef=t,this.data=e}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return t.\u0275fac=function(e){return new(e||t)(i.gc(R),i.gc(C))},t.\u0275cmp=i.ac({type:t,selectors:[["simple-snack-bar"]],hostBindings:function(t,e,n){1&t&&i.mc(y)},decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(i.nc(0,"span"),i.Uc(1),i.lc(),i.Tc(2,O,3,1,"div",0)),2&t&&(i.Rb(1),i.Vc(e.data.message),i.Rb(1),i.Ec("ngIf",e.hasAction))},directives:[a.k,k.a],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}"],encapsulation:2,changeDetection:0}),t})();const I={snackBarState:Object(p.n)("state",[Object(p.k)("void, hidden",Object(p.l)({transform:"scale(0.8)",opacity:0})),Object(p.k)("visible",Object(p.l)({transform:"scale(1)",opacity:1})),Object(p.m)("* => visible",Object(p.e)("150ms cubic-bezier(0, 0, 0.2, 1)")),Object(p.m)("* => void, * => hidden",Object(p.e)("75ms cubic-bezier(0.4, 0.0, 1, 1)",Object(p.l)({opacity:0})))])};let T=(()=>{class t extends f.a{constructor(t,e,n,i){super(),this._ngZone=t,this._elementRef=e,this._changeDetectorRef=n,this.snackBarConfig=i,this._destroyed=!1,this._onExit=new m.a,this._onEnter=new m.a,this._animationState="void",this._role="assertive"!==i.politeness||i.announcementMessage?"off"===i.politeness?null:"status":"alert"}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:e,toState:n}=t;if(("void"===n&&"void"!==e||"hidden"===n)&&this._completeExit(),"visible"===n){const t=this._onEnter;this._ngZone.run(()=>{t.next(),t.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}exit(){return this._animationState="hidden",this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(u.a)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,e=this.snackBarConfig.panelClass;e&&(Array.isArray(e)?e.forEach(e=>t.classList.add(e)):t.classList.add(e)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}return t.\u0275fac=function(e){return new(e||t)(i.gc(i.L),i.gc(i.r),i.gc(i.j),i.gc(B))},t.\u0275cmp=i.ac({type:t,selectors:[["snack-bar-container"]],viewQuery:function(t,e){var n;1&t&&i.Pc(f.b,!0),2&t&&i.Ic(n=i.wc())&&(e._portalOutlet=n.first)},hostBindings:function(t,e,n){1&t&&(i.Sb(2),i.Xb("@state.done",(function(t){return e.onAnimationEnd(t)})),i.mc(x)),2&t&&(i.Tb("role",e._role),i.Xc("@state",e._animationState))},features:[i.Ob],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&i.Tc(0,S,0,0,"ng-template",0)},directives:[f.b],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}@media (-ms-high-contrast:active){.mat-snack-bar-container{border:solid 1px}}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[I.snackBarState]}}),t})(),A=(()=>{class t{}return t.\u0275mod=i.ec({type:t}),t.\u0275inj=i.dc({factory:function(e){return new(e||t)},imports:[[g.e,f.f,a.c,k.b,_.g],_.g]}),t})();const D=new i.A("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new B}});let E=(()=>{class t{constructor(t,e,n,i,a,c){this._overlay=t,this._live=e,this._injector=n,this._breakpointObserver=i,this._parentSnackBar=a,this._defaultConfig=c,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,e){return this._attach(t,e)}openFromTemplate(t,e){return this._attach(t,e)}open(t,e="",n){const i=Object.assign({},this._defaultConfig,n);return i.data={message:t,action:e},i.announcementMessage||(i.announcementMessage=t),this.openFromComponent(j,i)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,e){const n=new f.e(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[B,e]])),i=new f.c(T,e.viewContainerRef,n),a=t.attach(i);return a.instance.snackBarConfig=e,a.instance}_attach(t,e){const n=Object.assign({},new B,this._defaultConfig,e),a=this._createOverlay(n),c=this._attachSnackBarContainer(a,n),o=new R(c,a);if(t instanceof i.ab){const e=new f.g(t,null,{$implicit:n.data,snackBarRef:o});o.instance=c.attachTemplatePortal(e)}else{const e=this._createInjector(n,o),i=new f.c(t,void 0,e),a=c.attachComponentPortal(i);o.instance=a.instance}return this._breakpointObserver.observe(v.b.HandsetPortrait).pipe(Object(b.a)(a.detachments())).subscribe(t=>{const e=a.overlayElement.classList;t.matches?e.add("mat-snack-bar-handset"):e.remove("mat-snack-bar-handset")}),this._animateSnackBar(o,n),this._openedSnackBarRef=o,this._openedSnackBarRef}_animateSnackBar(t,e){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),e.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),e.duration&&e.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(e.duration)),e.announcementMessage&&this._live.announce(e.announcementMessage,e.politeness)}_createOverlay(t){const e=new g.d;e.direction=t.direction;let n=this._overlay.position().global();const i="rtl"===t.direction,a="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!i||"end"===t.horizontalPosition&&i,c=!a&&"center"!==t.horizontalPosition;return a?n.left("0"):c?n.right("0"):n.centerHorizontally(),"top"===t.verticalPosition?n.top("0"):n.bottom("0"),e.positionStrategy=n,this._overlay.create(e)}_createInjector(t,e){return new f.e(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[R,e],[C,t.data]]))}}return t.\u0275fac=function(e){return new(e||t)(i.rc(g.c),i.rc(w.g),i.rc(i.B),i.rc(v.a),i.rc(t,12),i.rc(D))},t.\u0275prov=i.cc({token:t,factory:t.\u0275fac,providedIn:A}),t.ngInjectableDef=Object(i.cc)({factory:function(){return new t(Object(i.rc)(g.c),Object(i.rc)(w.g),Object(i.rc)(i.x),Object(i.rc)(v.a),Object(i.rc)(t,12),Object(i.rc)(D))},token:t,providedIn:A}),t})();var P=n("tmTa"),M=n("gVAx"),U=n("tyNb"),L=n("MCLT"),F=n("vkgz"),z=n("Kj3r"),V=n("/uUt"),N=n("eIep"),$=n("LRne"),H=n("lJxs"),W=n("JIr8");class G{constructor(t,e){this.id=t.idlinha,this.nome=t.nome,this.codigo=t.codigo,this.coordenadas=e}}class J{constructor(t){this.lat=t.lat,this.lng=t.lng}}var X=n("tk/3");let K=(()=>{class t{constructor(t){this.http=t,this.baseUrl="http://www.poatransporte.com.br/php/facades/process.php"}getItinerario(t){return this.http.get(`${this.baseUrl}?a=il&p=${t}`)}}return t.\u0275fac=function(e){return new(e||t)(i.rc(X.a))},t.\u0275prov=i.cc({token:t,factory:t.\u0275fac}),t})(),Z=(()=>{class t{constructor(t){this.restService=t}getItinerario(t){return this.restService.getItinerario(t).pipe(Object(H.a)(t=>this.buildItinerario(t)),Object(F.a)(t=>console.log(t),e=>console.error(`Error on fetching Itinerario UT ${t}`),()=>console.log(`Fetched Itinerario UT ${t}`)),Object(W.a)(this.handleError(`getItinerario unidadeId=${t}`)))}filterByIndexedEntries(t){return Object.keys(t).filter(t=>!isNaN(parseInt(t))).map(t=>Number(t))}buildItinerario(t){const e=this.filterByIndexedEntries(t).map(e=>new J(t[e]));return new G(t,e)}handleError(t="operation",e){return t=>(console.error(t),Object($.a)(e))}}return t.\u0275fac=function(e){return new(e||t)(i.rc(K))},t.\u0275prov=i.cc({token:t,factory:t.\u0275fac}),t})();function Q(t,e){1&t&&i.hc(0,"mat-spinner",25),2&t&&i.Ec("diameter",20)}function q(t,e){1&t&&(i.nc(0,"mat-icon",26),i.Uc(1,"check_circle"),i.lc())}function Y(t,e){1&t&&(i.nc(0,"mat-icon",27),i.Uc(1,"error"),i.lc())}function tt(t,e){1&t&&(i.nc(0,"th",28),i.Uc(1,"Mapa"),i.lc())}function et(t,e){if(1&t&&(i.nc(0,"td",29),i.nc(1,"a",30),i.nc(2,"mat-icon",31),i.Uc(3,"explore"),i.lc(),i.lc(),i.lc()),2&t){const t=e.$implicit;i.Rb(1),i.Fc("href","https://www.google.com/maps/?q=",t.lat,",",t.lng,"",i.Mc)}}function nt(t,e){1&t&&i.hc(0,"td",32)}function it(t,e){1&t&&(i.nc(0,"th",28),i.Uc(1,"Latitude"),i.lc())}function at(t,e){if(1&t&&(i.nc(0,"td",29),i.Uc(1),i.lc()),2&t){const t=e.$implicit;i.Rb(1),i.Vc(t.lat)}}function ct(t,e){1&t&&i.hc(0,"td",32)}function ot(t,e){1&t&&(i.nc(0,"th",28),i.Uc(1,"Longitude"),i.lc())}function st(t,e){if(1&t&&(i.nc(0,"td",29),i.Uc(1),i.lc()),2&t){const t=e.$implicit;i.Rb(1),i.Vc(t.lng)}}function rt(t,e){1&t&&i.hc(0,"td",32)}function lt(t,e){1&t&&i.hc(0,"tr",33)}function dt(t,e){1&t&&i.hc(0,"tr",34)}function ht(t,e){1&t&&i.hc(0,"tr",35)}let mt=(()=>{class t{constructor(t,e,n,i){this.itinerarioUnidadeService=t,this.formBuilder=e,this.snackBar=n,this.route=i,this.isLoading=!1,this.wasFound=!0,this.tableSizeOptions=[5,10,20],this.displayedColumns=["map","lat","lng"]}ngOnInit(){this.form=this.formBuilder.group({utIdCtrl:["",[c.l.pattern("^[0-9]*$"),c.l.minLength(1)]]}),this.reactToFormIdFieldValueChange().subscribe(),this.route.params.subscribe(t=>{t.id&&this.form.get("utIdCtrl").setValue(t.id)})}reactToFormIdFieldValueChange(){return this.form.get("utIdCtrl").valueChanges.pipe(Object(F.a)(()=>{this.isLoading=!0}),Object(z.a)(600),Object(V.a)(),Object(N.a)(t=>this.getItinerario(t)),Object(F.a)(t=>{this.itinerario=t}),Object(F.a)(()=>{this.isLoading=!1}),Object(F.a)(t=>{Object(L.isNullOrUndefined)(t)?(this.dataSource=void 0,this.wasFound=!1,this.openSnackBar("Sem resultados!","Fechar")):(this.dataSource=new P.o(this.itinerario.coordenadas),this.dataSource.paginator=this.paginator,this.wasFound=!0,this.openSnackBar(`Itiner\xe1rio da UT ${this.itinerario.id} encontrado!`,"Fechar"))}))}getItinerario(t){return this.itinerarioUnidadeService.getItinerario(t)}openSnackBar(t,e){this.snackBar.open(t,e,{duration:2e3})}}return t.\u0275fac=function(e){return new(e||t)(i.gc(Z),i.gc(c.b),i.gc(E),i.gc(U.a))},t.\u0275cmp=i.ac({type:t,selectors:[["app-itinerario-unidade-details"]],viewQuery:function(t,e){var n;1&t&&i.Pc(d.a,!0),2&t&&i.Ic(n=i.wc())&&(e.paginator=n.first)},decls:44,vars:13,consts:[[1,"top-container"],[3,"formGroup"],["appearance","standard",1,"full-width"],["matInput","","type","search","placeholder","ID da Linha da UT","formControlName","utIdCtrl"],["matSuffix","","matTooltip","Buscando...",3,"diameter",4,"ngIf"],["matSuffix","","matTooltip","Resultados encontrados!","style","color: green;",4,"ngIf"],["matSuffix","","matTooltip","Sem resultados!","style","color: red;",4,"ngIf"],["align","end"],["align","begin"],[1,"details-container"],[1,"item"],[1,"key"],[1,"value"],[1,"table-container"],["mat-table","",3,"dataSource"],["matColumnDef","map"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","lat"],["matColumnDef","lng"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["showFirstLastButtons","",3,"pageSizeOptions"],["matSuffix","","matTooltip","Buscando...",3,"diameter"],["matSuffix","","matTooltip","Resultados encontrados!",2,"color","green"],["matSuffix","","matTooltip","Sem resultados!",2,"color","red"],["mat-header-cell",""],["mat-cell",""],["mat-flat-button","","target","_blank",3,"href"],["matTooltip","Olhar localiza\xe7\xe3o no Google Maps"],["mat-footer-cell",""],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(t,e){1&t&&(i.nc(0,"mat-card"),i.nc(1,"mat-card-title"),i.Uc(2,"Itiner\xe1rio de Linha da UT"),i.lc(),i.nc(3,"mat-card-content"),i.nc(4,"div",0),i.nc(5,"form",1),i.nc(6,"mat-form-field",2),i.hc(7,"input",3),i.Tc(8,Q,1,1,"mat-spinner",4),i.Tc(9,q,2,0,"mat-icon",5),i.Tc(10,Y,2,0,"mat-icon",6),i.nc(11,"mat-hint",7),i.Uc(12,"Somente n\xfameros. Ex: 1, 12, 1234."),i.lc(),i.nc(13,"mat-error",8),i.Uc(14,"ID inv\xe1lido."),i.lc(),i.lc(),i.lc(),i.nc(15,"div",9),i.nc(16,"div",10),i.nc(17,"a",11),i.Uc(18,"Nome:"),i.lc(),i.nc(19,"a",12),i.Uc(20),i.lc(),i.lc(),i.nc(21,"div",10),i.nc(22,"a",11),i.Uc(23,"C\xf3digo:"),i.lc(),i.nc(24,"a",12),i.Uc(25),i.lc(),i.lc(),i.lc(),i.lc(),i.nc(26,"div",13),i.nc(27,"table",14),i.kc(28,15),i.Tc(29,tt,2,0,"th",16),i.Tc(30,et,4,2,"td",17),i.Tc(31,nt,1,0,"td",18),i.jc(),i.kc(32,19),i.Tc(33,it,2,0,"th",16),i.Tc(34,at,2,1,"td",17),i.Tc(35,ct,1,0,"td",18),i.jc(),i.kc(36,20),i.Tc(37,ot,2,0,"th",16),i.Tc(38,st,2,1,"td",17),i.Tc(39,rt,1,0,"td",18),i.jc(),i.Tc(40,lt,1,0,"tr",21),i.Tc(41,dt,1,0,"tr",22),i.Tc(42,ht,1,0,"tr",23),i.lc(),i.hc(43,"mat-paginator",24),i.lc(),i.lc(),i.lc()),2&t&&(i.Rb(5),i.Ec("formGroup",e.form),i.Rb(3),i.Ec("ngIf",e.isLoading),i.Rb(1),i.Ec("ngIf",!e.isLoading&&e.wasFound&&e.itinerario),i.Rb(1),i.Ec("ngIf",!e.isLoading&&!e.wasFound),i.Rb(10),i.Vc(e.itinerario?e.itinerario.nome:""),i.Rb(5),i.Vc(e.itinerario?e.itinerario.codigo:""),i.Rb(2),i.Ec("dataSource",e.dataSource),i.Rb(13),i.Ec("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!1),i.Rb(1),i.Ec("matRowDefColumns",e.displayedColumns),i.Rb(1),i.Ec("matFooterRowDef",e.displayedColumns)("matFooterRowDefSticky",!0),i.Rb(1),i.Ec("pageSizeOptions",e.tableSizeOptions))},directives:[o.a,o.d,o.b,c.m,c.i,c.d,s.b,l.a,c.a,c.h,c.c,a.k,s.e,s.a,P.n,P.c,P.i,P.b,P.e,P.k,P.m,P.g,d.a,h.b,s.f,M.a,r.a,P.h,P.a,P.d,P.j,P.l,P.f],styles:[".mat-card[_ngcontent-%COMP%]{width:600px;margin:auto}.mat-card[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.top-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:wrap}table[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{height:100%;overflow:auto}.details-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;flex-wrap:wrap;-webkit-box-pack:space-evenly;justify-content:space-evenly;margin:15px 0}.item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.item[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin:0 10px}.key[_ngcontent-%COMP%]{font-weight:700}.value[_ngcontent-%COMP%]{display:block;width:20em}"]}),t})();const pt=[{path:"",component:mt},{path:":id",component:mt}];let ft=(()=>{class t{}return t.\u0275mod=i.ec({type:t}),t.\u0275inj=i.dc({factory:function(e){return new(e||t)},imports:[[U.e.forChild(pt)],U.e]}),t})();n.d(e,"ItinerarioUnidadeModule",(function(){return ut}));let ut=(()=>{class t{}return t.\u0275mod=i.ec({type:t}),t.\u0275inj=i.dc({factory:function(e){return new(e||t)},providers:[Z,K],imports:[[a.c,c.e,c.k,l.b,s.d,h.a,o.c,P.p,r.b,d.b,A,M.b,ft]]}),t})()}}]);